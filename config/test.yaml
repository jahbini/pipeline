# ============================================================
# tests/test_pipeline.yaml
# Memo-centric test recipe for evaluator
# ============================================================

run:
  output_dir: out
  data_dir: data
  params_dir: params

files:
  table: data/table.json
  finalized: data/finalized.json

# ------------------------------------------------------------
# Step 1 — generate input
# ------------------------------------------------------------
step1_setup:
  run: test/step1_setup.coffee
  greeting: Hello

# ------------------------------------------------------------
# Step 2 — transform input
# ------------------------------------------------------------
step2_transform:
  run: test/step2_transform.coffee
  input: data/input.json
  transformed: data/transformed.json

# ------------------------------------------------------------
# Step 3 — derive tabular summary
# ------------------------------------------------------------
step3_table:
  run: test/step3_table.coffee
  transformed: data/transformed.json
  summary: data/report.csv

# ------------------------------------------------------------
# Step 4 — wait / synchronization test
# ------------------------------------------------------------
step4_wait:
  run: test/step4_wait.coffee

# ------------------------------------------------------------
# Step 5 — finalize outputs
# ------------------------------------------------------------
step5_finalize:
  run: test/step5_finalize.coffee
  transformed: data/transformed.json
  input: data/input.json
  wait: data/wait.json

# ------------------------------------------------------------
# Step 6 — external curl test
# ------------------------------------------------------------
test6_curl:
  run: test/step6_curl.coffee
  desc: "Spawn a bash curl command to verify external process integration"
  curl_result: data/curl_result.json

# ------------------------------------------------------------
# Step 7 — python process test
# ------------------------------------------------------------
test7_python:
  run: test/step7_python.coffee
  desc: "Spawn a Python subprocess and capture output"
  python_result: data/python_result.json
